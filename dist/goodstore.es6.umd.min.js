!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("goodcore"),require("rxjs/BehaviorSubject")):"function"==typeof define&&define.amd?define(["exports","goodcore","rxjs/BehaviorSubject"],t):t(e.goodstore={},e.goodcore,e.BehaviorSubject)}(this,function(e,t,r){"use strict";class o{constructor(e,r){this._fixedLoadPort=new t.Range2,this._fixedPxLoadPort=new t.Range2,this.totalCells=new t.Vec2(-1,-1),this.totalPx=new t.Vec2(-1,-1),this._config=e,this._stream=r,this.fetchSubscription=null,this.ignoreFetch=-1,this.requestId=-1}get config(){return this._config}set config(e){this._config=e}get stream(){return this._stream}get loadPort(){return this.config.loadPort}set loadPort(e){this.config.loadPort=e}get pxLoadPort(){return this.config.pxLoadPort}set pxLoadPort(e){this.config.pxLoadPort=e}get fixedLoadPort(){return this._fixedLoadPort}get fixedPxLoadPort(){return this._fixedLoadPort}get viewPort(){return this.config.viewPort}set viewPort(e){this.config.viewPort.equals(e)||this.ignoreOngoingFetch(),this.config.viewPort=e}get pxViewPort(){return this.config.pxViewPort}set pxViewPort(e){this.config.pxViewPort.equals(e)||this.ignoreOngoingFetch(),this.config.pxViewPort=e}fixLoadPort(){this.config.pxLoadPort.isZero?(this._fixedLoadPort.set(this.config.loadPort),this._fixedPxLoadPort.zero()):(this._fixedPxLoadPort.set(this.config.pxLoadPort),this._fixedLoadPort.zero())}ignoreOngoingFetch(){null!==this.fetchSubscription&&(this.ignoreFetch=this.requestId)}cancelOngoingFetch(){null!==this.fetchSubscription&&(this.fetchSubscription.unsubscribe(),this.fetchSubscription=null)}limitLoadPortByTotalCells(){this.limitPortByTotal(this.loadPort,this.totalCells)}limitPxLoadPortByTotalPx(){this.limitPortByTotal(this.pxLoadPort,this.totalPx)}limitPortByTotal(e,r){if(!e.isZero&&!r.equals({x:-1,y:-1})){let o=(new t.Rect).fromRange2(e).stop.subtract(r).max(new t.Vec2(0,0));e.size.subtract(o)}}}class s{constructor(e,t,s){this._force=!1,this._id=e,this._store=t,this._stream=new r.BehaviorSubject(null),this._internal=new o(s,this._stream)}get internal(){return this._internal}get stream(){return this._stream}get viewPort(){return this._internal.viewPort}set viewPort(e){this._internal.viewPort=e}get pxViewPort(){return this._internal.pxViewPort}set pxViewPort(e){this._internal.pxViewPort=e}get requestMargin(){return this._internal.config.requestMargin}set requestMargin(e){this._internal.config.requestMargin=e}load(e){this.readConfig(e),this._store.load(this.internal,this._force)}unregister(){throw new Error("not implemented")}readConfig(e){void 0!==e&&(void 0!==e.requestMargin&&(this.internal.config.requestMargin=e.requestMargin),void 0!==e.viewPort&&(this.viewPort=e.viewPort),void 0!==e.pxViewPort&&(this.pxViewPort=e.pxViewPort),this._force=!0===e.forceStream)}}var a=function(e,t,r,o){var s,a=arguments.length,i=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,o);else for(var n=e.length-1;n>=0;n--)(s=e[n])&&(i=(a<3?s(i):a>3?s(t,r,i):s(t,r))||i);return a>3&&i&&Object.defineProperty(t,r,i),i};e.DataStoreConsumable=class{constructor(){this.totalCells=new t.Vec2,this.totalPx=new t.Vec2,this.loadPort=null,this.pxScope=new t.Rect,this.rows=null}init(e,t){throw new Error("Method not implemented.")}},e.DataStoreConsumable=a([t.Initable],e.DataStoreConsumable);var i=function(e,t,r,o){var s,a=arguments.length,i=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,o);else for(var n=e.length-1;n>=0;n--)(s=e[n])&&(i=(a<3?s(i):a>3?s(t,r,i):s(t,r))||i);return a>3&&i&&Object.defineProperty(t,r,i),i};e.DataStoreRequestDto=class{constructor(){this.sourceId="",this.requestId=0,this.cellRequest=null}init(e,t){throw new Error("Method not implemented.")}},e.DataStoreRequestDto=i([t.Initable],e.DataStoreRequestDto);var n=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};let l=class{constructor(e=0){this.i=0,this.h=0,this.d=null,this.c=new Array(e)}release(){throw new Error("Method not implemented.")}initPool(e){throw new Error("Method not implemented.")}init(e,t){throw new Error("Method not implemented.")}};l=function(e,t,r,o){var s,a=arguments.length,i=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,o);else for(var n=e.length-1;n>=0;n--)(s=e[n])&&(i=(a<3?s(i):a>3?s(t,r,i):s(t,r))||i);return a>3&&i&&Object.defineProperty(t,r,i),i}([t.Poolable,t.Initable,n("design:paramtypes",[Number])],l);var h=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};let g=class{constructor(){this._id=0,this._r=[],this._pxScope=new t.Rect,this._cellSize=new t.Vec2,this._r=new Array}init(e,t){throw new Error("Method not implemented.")}release(){throw new Error("Method not implemented.")}initPool(e){throw new Error("Method not implemented.")}get id(){return this._id}set id(e){this._id=e}get r(){return this._r}get pxScope(){return this._pxScope}set pxScope(e){this._pxScope.set(e)}get cellSize(){return this._cellSize}set cellSize(e){this._cellSize.set(e),this.initData(e)}addRow(){const e=new l;return this._r.push(e),e}initData(e){let t=-1;void 0===this._r&&(this._r=[]);let r=this._r,o=r.length-1,s=Math.min(o,e.y);for(;++o<e.y;)r.push(new l(e.x));for(r.length!==e.y&&(r.length=e.y);++t<s;)r[t].c.length=e.x}};g=function(e,t,r,o){var s,a=arguments.length,i=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,o);else for(var n=e.length-1;n>=0;n--)(s=e[n])&&(i=(a<3?s(i):a>3?s(t,r,i):s(t,r))||i);return a>3&&i&&Object.defineProperty(t,r,i),i}([t.Poolable,t.Initable,h("design:paramtypes",[])],g);class c{constructor(e,r,o=null){this.isDebug=!0,this._usePx=!0,this._dummyRect=new t.Rect,this._pagePool=new t.Pool(g),this._pageLookup=new t.Dictionary,this._requestedPages=new t.Dictionary,this._pageQueue=new Array,this._cellsPerPage=new t.Vec2,this._pagesPerCell=new t.Vec2,this.setPageSize(e),this._retainSize=r,this._totalPages=new t.Vec2,this._totalCells=new t.Vec2,this._totalPx=new t.Vec2,this._pagePxRanges=o,this._usePx=null!==o}get totalPx(){return this._totalPx}get totalCells(){return this._totalCells}get totalPages(){return this._totalPages}setPageSize(e){this._cellsPerPage.equals(e)||this.emptyPageStore(),this._cellsPerPage.set(e),this._pagesPerCell.x=1/e.x,this._pagesPerCell.y=1/e.y}isRequestedDataLoaded(e){let t=!1;const r=!e.loadPort.isZero,o=!e.pxLoadPort.isZero;(r||o)&&(t=null===(r?this.cellRangeToPageRange(e.loadPort):this.pxRangeToPageRange(e.pxLoadPort)).first(e=>!this._pageLookup.has(e.y*this._totalPages.x+e.x)));return t}limitPagesToLoad(e){const r=e.clone(),o=(new t.Rect).fromRange2(e);let s=!1;for(let e=o.start.y;e<o.stop.y;e+=1){for(let t=o.start.x;t<o.stop.x;t+=1)if(!this._pageLookup.has(e*this._cellsPerPage.x+t)&&!this._requestedPages.has(e*this._cellsPerPage.x+t)){s=!0;break}if(s)break;r.pos.y+=1,r.size.y-=1}s=!1;for(let e=o.stop.y;e>o.start.y;e-=1){for(let t=o.start.x;t<o.stop.x;t+=1)if(!this._pageLookup.has(e*this._cellsPerPage.x+t)&&!this._requestedPages.has(e*this._cellsPerPage.x+t)){s=!0;break}if(s)break;r.size.y-=1}s=!1;for(let e=o.start.x;e<o.stop.x;e+=1){for(let t=o.start.y;t<o.stop.y;t+=1)if(!this._pageLookup.has(t*this._cellsPerPage.x+e)&&!this._requestedPages.has(t*this._cellsPerPage.x+e)){s=!0;break}if(s)break;r.pos.x+=1,r.size.x-=1}s=!1;for(let e=o.stop.x;e>o.start.x;e-=1){for(let t=o.start.y;t<o.stop.y;t+=1)if(!this._pageLookup.has(t*this._cellsPerPage.x+e)&&!this._requestedPages.has(t*this._cellsPerPage.x+e)){s=!0;break}if(s)break;r.size.x-=1}return r}cellSpaceToPageSpaceX(e){return e/this._cellsPerPage.x|0}cellSpaceToPageSpaceY(e){return e/this._cellsPerPage.y|0}cellSpaceToInnerPageSpaceX(e){return e-this._cellsPerPage.x*this.cellSpaceToPageSpaceX(e)}cellSpaceToInnerPageSpaceY(e){return e-this._cellsPerPage.y*this.cellSpaceToPageSpaceY(e)}pxRangeToPageRange(e){t.Util.assert(!!this._pagePxRanges.x&&!!this._pagePxRanges.y,"pagePxRanges does not contain valid ranges");let r=e.pos.x,o=t.Arr.binarySearch(this._pagePxRanges.x,e=>e.p+e.s<=r?-1:e.p>r?1:0),s=e.pos.y,a=t.Arr.binarySearch(this._pagePxRanges.y,e=>e.p+e.s<=s?-1:e.p>s?1:0),i=e.pos.x+e.size.x-1,n=t.Arr.binarySearch(this._pagePxRanges.x,e=>e.p+e.s<=i?-1:e.p>i?1:0),l=e.pos.y+e.size.y-1,h=t.Arr.binarySearch(this._pagePxRanges.y,e=>e.p+e.s<=l?-1:e.p>l?1:0);return(new t.Range2).fromRect(new t.Rect(o,a,n,h,!0))}cellRangeToPageRange(e){let r=(new t.Range2).set(e);const o=this._dummyRect.fromRange2(r).translate(this._pagesPerCell);return o.start.toInt(),o.stop.ceil(),r.fromRect(o),r}pageRangeToCellRange(e){return(new t.Range2).set(e).translate(this._cellsPerPage).toInt()}pxRangeToCellRange(e){const r=this.pxRangeToPageRange(e),o=this.getDataPagesForPageRange(r);let s=o[0].pxScope.start.clone(),a=0;t.Arr.until(o[0].r[0].c,(t,r)=>e.pos.x<s.x+t.w,(e,t)=>{s.x+=e.w,++a});let i=0;t.Arr.until(o[0].r,(t,r)=>e.pos.y<s.y+t.h,(e,t)=>{s.y+=e.h,++i}),s=o[o.length-1].pxScope.start.clone();let n=0;t.Arr.until(o[o.length-1].r[0].c,(t,r)=>e.pos.x+e.size.x-1<s.x+t.w,(e,t)=>{s.x+=e.w,++n});let l=0;t.Arr.until(o[o.length-1].r,(t,r)=>e.pos.y+e.size.y-1<s.y+t.h,(e,t)=>{s.y+=e.h,++l});let h=o[0].r[i].c[a].i,g=o[o.length-1].r[l].c[n].i;return(new t.Range2).fromRect(new t.Rect(h.x,h.y,g.x,g.y,!0))}addDataToPageStore(e,t){this.partitionDataIntoPages(t.r,t.dataPort,t.pxScope).forEach(e=>this.insertPage(e)),this.cleanPageStore(e)}readPropertiesFromResponse(e){this._totalCells.equals(e.totalCells)||(this._totalPages.set(e.totalCells).scale(this._pagesPerCell),this._totalCells.set(e.totalCells),this._usePx&&this._totalPx.set(e.totalPx))}emptyPageStore(){for(;this._pageQueue.length>0;)this.shiftPageQueue()}cleanPageStore(e){let r=this.calculateLockedPages(e),o=Math.max(this._retainSize,r.values.length);t.Arr.reverse(this._pageQueue),t.Arr.reverseUntil(this._pageQueue,(e,t)=>this._pageQueue.length<=o,(e,t)=>{r.has(""+this._pageQueue[t].id)||this.removePageFromQueue(this._pageQueue[t])}),t.Arr.reverse(this._pageQueue)}removePageFromQueue(e){t.Arr.remove(this._pageQueue,e),this.deletePageById(e.id),e.release()}shiftPageQueue(){const e=this._pageQueue.shift();this.deletePageById(e.id),e.release()}deletePageById(e){this._pageLookup.has(e)&&this._pageLookup.delete(e)}partitionDataIntoPages(e,r,o){const s=(new t.Rect).fromRange2(this.cellRangeToPageRange(r)),a=new Array;let i=0;for(let t=s.start.y;t<s.stop.y;++t){let r=0;for(let o=s.start.x;o<s.stop.x;++o){const s=t*this._totalPages.x+o;if(!this._pageLookup.has(s)){const n=this._pagePool.get();if(n.id=s,n.cellSize=this._cellsPerPage,this._usePx){let e=this._pagePxRanges.x[o],r=this._pagePxRanges.y[t],s=n.pxScope;s.start.x=e.p,s.start.y=r.p,s.stop.x=e.p+e.s-1,s.stop.y=r.p+r.s-1}a.push(n);const l=i*this._cellsPerPage.y,h=r*this._cellsPerPage.x,g=l+this._cellsPerPage.y,c=h+this._cellsPerPage.x;let P=0;for(let t=l;t<g&&t<e.length;++t){const r=e[t],o=n.r[P];o.h=r.h,o.i=r.i,o.d=r.d;let s=0;for(let e=h;e<c&&e<r.c.length;++e)o.c[s]=r.c[e],++s;++P}}++r}++i}return a}insertPage(e){!this._pageLookup.has(e.id)||t.Arr.removeOneByFn(this._pageQueue,function(t){return t.id===e.id}),this._pageQueue.push(e),this._pageLookup.set(e.id,e)}calculateLockedPages(e){let r=new t.Dictionary;return t.Arr.forEach(t.Arr.flatten(t.Arr.map(e,e=>this.getPageIdsForViewPort(e.loadPort))),e=>r.set(e,e)),r}assembleDataFromPages(e){const r=new Array;let o=this.getLoadPort(e);t.Util.loop(o.size.y,e=>r.push(new l(o.size.x)));const s=this.getDataPages(e),a=(new t.Rect).fromRange2(o),i=this.cellRangeToPageRange(o),n=new t.Vec2,h=new t.Vec2,g=new t.Vec2,c=new t.Vec2;let P;const p=r.length,u=void 0===r[0]?0:r[0].c.length,d=new t.Vec2;for(n.y=a.start.y;n.y<a.stop.y&&h.y<p;n.y+=1,h.y+=1){g.y=this.cellSpaceToPageSpaceY(n.y),h.x=0,c.y=this.cellSpaceToInnerPageSpaceY(n.y),d.set(g).subtract(i.pos);let e=s[P=d.y*i.size.x+d.x].r[c.y];for(r[h.y].init({i:e.i,h:e.h,d:e.d}),n.x=a.start.x;n.x<a.stop.x&&h.x<u;n.x+=1,h.x+=1)g.x=this.cellSpaceToPageSpaceX(n.x),c.x=this.cellSpaceToInnerPageSpaceX(n.x),c.y=this.cellSpaceToInnerPageSpaceY(n.y),d.set(g).subtract(i.pos),P=d.y*i.size.x+d.x,r[h.y].c[h.x]=s[P].r[c.y].c[c.x]}return r}getPageIdsForViewPort(e){const t=[];return this.cellRangeToPageRange(e).forEach(e=>{const r=e.y*this._cellsPerPage.x+e.x;return this._pageLookup.has(r)&&t.push(this._pageLookup.get(r).id),!1}),t}getLoadPort(e){return!e.loadPort.isZero?e.loadPort:this.pxRangeToCellRange(e.pxLoadPort)}getDataPages(e){return!e.loadPort.isZero?this.getDataPagesForCellPort(e.loadPort):this.getDataPagesForPxPort(e.pxLoadPort)}getDataPagesForCellPort(e){const t=this.cellRangeToPageRange(e);return this.getDataPagesForPageRange(t)}getDataPagesForPxPort(e){const t=this.pxRangeToPageRange(e);return this.getDataPagesForPageRange(t)}getDataPagesForPageRange(e){const t=new Array;return e.forEach(e=>{const r=e.y*this._totalPages.x+e.x;return this._pageLookup.has(r)&&t.push(this._pageLookup.get(r)),!1}),t}}class P{constructor(e){this.isDebug=!0,this._id=t.Util.newUUID(),this._usePx=!0,this._requestCounter=0,this._handleCounter=0,this._callers=[],this._pageStore=null,this._endPointFn=e.endPointFn?e.endPointFn:P.DEFAULT_CONFIG.endPointFn,this._pageStore=new c(e.pageSize||P.DEFAULT_CONFIG.pageSize,e.retainSize?e.retainSize:P.DEFAULT_CONFIG.retainSize,e.pagePxRanges)}load(e,r=!1){t.Util.assert(t.Test.isFunction(this._endPointFn),"EndPoint is valid function",this.isDebug),t.Util.assert(void 0!==e.viewPort,"ViewPort is defined",this.isDebug),(this.loadPortHasChanged(e)||r)&&(e.limitLoadPortByTotalCells(),e.limitPxLoadPortByTotalPx(),this._pageStore.isRequestedDataLoaded(e)?(this.addDataToStream(e,r),this._pageStore.cleanPageStore(this._callers)):e.fetchSubscription=this.fetchData(e).subscribe(o=>{t.Util.assert(void 0!==o,"Payload from server was empty in DataStore.load()",this.isDebug)&&(this.readPropertiesFromResponse(e,o),e.limitLoadPortByTotalCells(),e.limitPxLoadPortByTotalPx(),this._pageStore.addDataToPageStore(this._callers,o),e.ignoreFetch<e.requestId&&this.addDataToStream(e,r))},t=>{e.cancelOngoingFetch(),this.onDataFail(e,t)}))}loadPortHasChanged(e){const t=e.loadPort,r=e.pxLoadPort;return!t.isZero&&!t.equals(e.fixedLoadPort)||!r.isZero&&!r.equals(e.fixedPxLoadPort)}readPropertiesFromResponse(e,r){e.totalCells=(new t.Vec2).set(r.totalCells),this._usePx=!!r.pxScope,this._usePx&&e.totalPx.set(r.totalPx),r.cellsPerPage&&this._pageStore.setPageSize(r.cellsPerPage),this._pageStore.readPropertiesFromResponse(r)}register(e){const t=new s(this._handleCounter,this,e);return this._handleCounter+=1,this._callers.push(t.internal),t}fetchData(e){const t=this.createRequestDTO(e);return e.requestId=this._requestCounter,e.cancelOngoingFetch(),this._endPointFn(t)}createRequestDTO(t){let r=null,o=null;o=t.pxViewPort.isZero?this._pageStore.cellRangeToPageRange(t.loadPort):this._pageStore.pxRangeToPageRange(t.pxLoadPort),o=this._pageStore.limitPagesToLoad(o),r=this._pageStore.pageRangeToCellRange(o);new e.DataStoreRequestDto;const s=(new e.DataStoreRequestDto).init({sourceId:this._id,requestId:this._requestCounter,cellRequest:r});return this._requestCounter+=1,s}onDataFail(e,t){throw new Error("Not Implemented")}addDataToStream(t,r=!1){if(!this.viewPortIsAlreadyStreamed(t)||r){t.fixLoadPort();const r=this._pageStore.getLoadPort(t),o=this._pageStore.assembleDataFromPages(t);let s=null;this._usePx&&(s=this.calculatePxRangeFromCellRange(r));let a=new e.DataStoreConsumable;a.init({totalCells:this._pageStore.totalCells,totalPx:this._pageStore.totalPx,loadPort:r,rows:o,pxScope:s}),t.stream.next(a)}}viewPortIsAlreadyStreamed(e){return!e.viewPort.isZero&&e.fixedLoadPort.contains(e.viewPort)||!e.pxViewPort.isZero&&e.fixedPxLoadPort.contains(e.pxViewPort)}calculatePxRangeFromCellRange(e){let r=new t.Rect;const o=this._pageStore.getDataPagesForCellPort(e),s=(new t.Rect).fromRange2(e);let a=o[0].pxScope.start.clone(),i=o[o.length-1].pxScope.stop.clone(),n=o[0].r[0].c[0].i.x,l=o[0].r[0].c[o[0].r[0].c.length-1].i.x,h=o[0].r[0].i,g=(o[o.length-1].r[o[o.length-1].r.length-1].i,t.Arr.shallowCopy(o[0].r[0].c));t.Arr.until(g,(e,t)=>t+n>=s.start.x,(e,t)=>a.x+=e.w),t.Arr.reverse(g),t.Arr.until(g,(e,t)=>l-t>=s.start.x,(e,t)=>i.x-=e.w);let c=t.Arr.shallowCopy(o[0].r);return t.Arr.until(c,(e,t)=>t+h>=s.start.y,(e,t)=>a.y+=e.h),t.Arr.reverse(c),t.Arr.until(c,(e,t)=>l-t>=s.start.y,(e,t)=>i.y-=e.h),r.start=a,r.stop=i,r}}P.DEFAULT_CONFIG={pageSize:new t.Vec2(10,10),retainSize:10,endPointFn:null};var p=function(e,t,r,o){var s,a=arguments.length,i=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,o);else for(var n=e.length-1;n>=0;n--)(s=e[n])&&(i=(a<3?s(i):a>3?s(t,r,i):s(t,r))||i);return a>3&&i&&Object.defineProperty(t,r,i),i};e.RequestConfig=class{constructor(){this._viewPort=new t.Range2,this._pxViewPort=new t.Range2,this._requestMargin=new t.Vec2(0,0),this._loadPort=new t.Range2,this._pxLoadPort=new t.Range2,this._pxRequestMargin=new t.Vec2(0,0)}init(e,t){throw new Error("Method not implemented.")}get viewPort(){return this._viewPort}set viewPort(e){this._viewPort.set(e),this._loadPort=this.calculateLoadPort(this._viewPort,this._requestMargin),this._pxViewPort.zero(),this._pxLoadPort.zero()}get requestMargin(){return this._requestMargin}set requestMargin(e){this._requestMargin.set(e),this._loadPort=this.calculateLoadPort(this._viewPort,this._requestMargin)}get pxViewPort(){return this._pxViewPort}set pxViewPort(e){this._pxViewPort.set(e),this._pxLoadPort=this.calculateLoadPort(this._pxViewPort,this._pxRequestMargin),this._viewPort.zero(),this._loadPort.zero()}get pxRequestMargin(){return this._pxRequestMargin}set pxRequestMargin(e){this._pxRequestMargin.set(e),this._pxLoadPort=this.calculateLoadPort(this._pxViewPort,this._pxRequestMargin)}get loadPort(){return this._loadPort}set loadPort(e){this._loadPort.set(e),this._pxLoadPort.zero()}get pxLoadPort(){return this._pxLoadPort}set pxLoadPort(e){this._pxLoadPort.set(e),this._loadPort.zero()}calculateLoadPort(e,t){let r=e.clone();r.pos.subtract(t),r.size.add(t.clone().multiply(2));let o=r.pos.clone().invert().max({x:0,y:0});return r.pos.add(o),r.size.subtract(o),r}},e.RequestConfig=p([t.Initable],e.RequestConfig),e.DataStore=P,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=goodstore.es6.umd.min.js.map
